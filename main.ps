/variables <<
>> def


/instruction_handlers <<
    (iload_0) { //variables 0 get }
    (iload_1) { //variables 1 get }
    (iadd)    { add }
    (ireturn) {}
>> def

/instructions [
    (iload_0)
    (iload_1)
    (iadd)
    (ireturn)
] def

/ip 0 def

/load_inst { % -> string
 instructions ip get
 /ip ip 1 add def 
} def

/next { % -> the semantics of the next instruction will be applied 
    //instruction_handlers load_inst get exec
} def

/define_variables_for_parameters { % <input parameter> <parameter_count> ->
    /i 0 def
    {
        //variables exch i exch put
        /i i 1 add def
    } repeat
} def

/execute { % <input parameters> <paramter_count> -> <result>
    define_variables_for_parameters
    instructions length { next } repeat
} def

1 2 % parameters
2 % parameter count
execute
=
quit